<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8f9fa"/>
  
  <!-- VPC Container -->
  <rect x="50" y="80" width="1100" height="680" fill="none" stroke="#FF9900" stroke-width="3" stroke-dasharray="10,5" rx="10"/>
  <text x="70" y="105" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#FF9900">VPC (10.0.0.0/16)</text>
  
  <!-- Availability Zone Labels -->
  <text x="200" y="135" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#666">AZ-1a</text>
  <text x="500" y="135" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#666">AZ-1b</text>
  <text x="800" y="135" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#666">AZ-1c</text>
  
  <!-- AZ Dividers -->
  <line x1="350" y1="120" x2="350" y2="740" stroke="#ddd" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="650" y1="120" x2="650" y2="740" stroke="#ddd" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- Internet Gateway -->
  <rect x="550" y="20" width="100" height="40" fill="#4CAF50" stroke="#2E7D32" stroke-width="2" rx="5"/>
  <text x="590" y="35" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Internet</text>
  <text x="590" y="48" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Gateway</text>
  

  
  <!-- Public Subnets -->
  <rect x="80" y="150" width="240" height="80" fill="#E3F2FD" stroke="#2196F3" stroke-width="2" rx="5"/>
  <text x="90" y="170" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#1976D2">Public Subnet 1</text>
  <text x="90" y="182" font-family="Arial, sans-serif" font-size="9" fill="#666">10.0.1.0/24</text>
  
  <rect x="380" y="150" width="240" height="80" fill="#E3F2FD" stroke="#2196F3" stroke-width="2" rx="5"/>
  <text x="390" y="170" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#1976D2">Public Subnet 2</text>
  <text x="390" y="182" font-family="Arial, sans-serif" font-size="9" fill="#666">10.0.2.0/24</text>
  
  <rect x="680" y="150" width="240" height="80" fill="#E3F2FD" stroke="#2196F3" stroke-width="2" rx="5"/>
  <text x="690" y="170" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#1976D2">Public Subnet 3</text>
  <text x="690" y="182" font-family="Arial, sans-serif" font-size="9" fill="#666">10.0.3.0/24</text>
  
  <!-- NAT Gateway -->
  <rect x="120" y="190" width="60" height="30" fill="#FF7043" stroke="#D84315" stroke-width="2" rx="3"/>
  <text x="150" y="200" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">NAT</text>
  <text x="150" y="210" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">Gateway</text>

  <!-- Bastion Host -->
  <rect x="240" y="190" width="60" height="30" fill="#FF9800" stroke="#F57C00" stroke-width="2" rx="3"/>
  <text x="270" y="200" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">Bastion</text>
  <text x="270" y="210" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">Host</text>
  
  <!-- Private Subnets -->
  <rect x="80" y="270" width="240" height="80" fill="#F3E5F5" stroke="#9C27B0" stroke-width="2" rx="5"/>
  <text x="90" y="290" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#7B1FA2">Private Subnet 1</text>
  <text x="90" y="302" font-family="Arial, sans-serif" font-size="9" fill="#666">10.0.4.0/24</text>
  
  <rect x="380" y="270" width="240" height="80" fill="#F3E5F5" stroke="#9C27B0" stroke-width="2" rx="5"/>
  <text x="390" y="290" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#7B1FA2">Private Subnet 2</text>
  <text x="390" y="302" font-family="Arial, sans-serif" font-size="9" fill="#666">10.0.5.0/24</text>
  
  <rect x="680" y="270" width="240" height="80" fill="#F3E5F5" stroke="#9C27B0" stroke-width="2" rx="5"/>
  <text x="690" y="290" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#7B1FA2">Private Subnet 3</text>
  <text x="690" y="302" font-family="Arial, sans-serif" font-size="9" fill="#666">10.0.6.0/24</text>
  
  <!-- Private EC2 Instance -->
  <rect x="240" y="310" width="60" height="30" fill="#4CAF50" stroke="#2E7D32" stroke-width="2" rx="3"/>
  <text x="270" y="320" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">Private</text>
  <text x="270" y="330" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">EC2</text>
  
  <!-- DB Subnets -->
  <rect x="80" y="390" width="240" height="80" fill="#FFEBEE" stroke="#F44336" stroke-width="2" rx="5"/>
  <text x="90" y="410" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#D32F2F">DB Subnet 1</text>
  <text x="90" y="422" font-family="Arial, sans-serif" font-size="9" fill="#666">10.0.7.0/24</text>
  
  <rect x="380" y="390" width="240" height="80" fill="#FFEBEE" stroke="#F44336" stroke-width="2" rx="5"/>
  <text x="390" y="410" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#D32F2F">DB Subnet 2</text>
  <text x="390" y="422" font-family="Arial, sans-serif" font-size="9" fill="#666">10.0.8.0/24</text>
  
  <rect x="680" y="390" width="240" height="80" fill="#FFEBEE" stroke="#F44336" stroke-width="2" rx="5"/>
  <text x="690" y="410" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#D32F2F">DB Subnet 3</text>
  <text x="690" y="422" font-family="Arial, sans-serif" font-size="9" fill="#666">10.0.9.0/24</text>
  
  <!-- RDS Multi-AZ -->
  <ellipse cx="200" cy="440" rx="40" ry="20" fill="#FF5722" stroke="#D84315" stroke-width="2"/>
  <text x="200" y="438" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">RDS</text>
  <text x="200" y="448" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">Primary</text>
  
  <ellipse cx="500" cy="440" rx="40" ry="20" fill="#FF5722" stroke="#D84315" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="500" y="438" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">RDS</text>
  <text x="500" y="448" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">Standby</text>
  
  <!-- S3 Bucket -->
  <rect x="980" y="300" width="80" height="60" fill="#FF9900" stroke="#E65100" stroke-width="2" rx="5"/>
  <text x="1020" y="320" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">S3</text>
  <text x="1020" y="332" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">Bucket</text>
  <text x="1020" y="344" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">(Via VPC</text>
  <text x="1020" y="354" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">Endpoint)</text>
  
  <!-- VPC Endpoint -->
  <circle cx="870" cy="330" r="15" fill="#9E9E9E" stroke="#424242" stroke-width="2"/>
  <text x="870" y="335" font-family="Arial, sans-serif" font-size="8" fill="white" text-anchor="middle">VPC</text>
  <text x="870" y="350" font-family="Arial, sans-serif" font-size="7" text-anchor="middle">Endpoint</text>
  
  <!-- Security Groups -->
  <rect x="80" y="520" width="200" height="80" fill="#FFF3E0" stroke="#FF9800" stroke-width="2" rx="5"/>
  <text x="90" y="540" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#F57C00">Security Groups</text>
  <text x="90" y="555" font-family="Arial, sans-serif" font-size="9" fill="#666">• Bastion SG (SSH from 0.0.0.0/0)</text>
  <text x="90" y="567" font-family="Arial, sans-serif" font-size="9" fill="#666">• Private SG (SSH from Bastion)</text>
  <text x="90" y="579" font-family="Arial, sans-serif" font-size="9" fill="#666">• DB SG (MySQL from Private)</text>
  <text x="90" y="591" font-family="Arial, sans-serif" font-size="9" fill="#666">• VPC Endpoint SG</text>
  
  <!-- IAM Role -->
  <rect x="320" y="520" width="120" height="60" fill="#E8F5E8" stroke="#4CAF50" stroke-width="2" rx="5"/>
  <text x="330" y="540" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#2E7D32">IAM Role</text>
  <text x="330" y="555" font-family="Arial, sans-serif" font-size="9" fill="#666">EC2-S3-Access-Role</text>
  <text x="330" y="567" font-family="Arial, sans-serif" font-size="9" fill="#666">Policy: S3ReadOnly</text>
  
  <!-- NAT Gateway to Internet via IGW -->
  <path d="M 150 190 Q 350 100 550 80" fill="none" stroke="#FF7043" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- Private EC2 to NAT Gateway for internet access -->
  <path d="M 240 325 Q 180 260 150 220" fill="none" stroke="#9C27B0" stroke-width="2" stroke-dasharray="3,3"/>

  <!-- Connection Lines -->
  <!-- Internet to IGW -->
  <line x1="600" y1="20" x2="600" y2="60" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- IGW to Public Subnets -->
  <line x1="550" y1="80" x2="200" y2="150" stroke="#2196F3" stroke-width="2"/>
  <line x1="600" y1="80" x2="500" y2="150" stroke="#2196F3" stroke-width="2"/>
  <line x1="650" y1="80" x2="800" y2="150" stroke="#2196F3" stroke-width="2"/>
  
  <!-- Bastion to Private EC2 -->
  <line x1="270" y1="220" x2="270" y2="310" stroke="#666" stroke-width="2" stroke-dasharray="3,3"/>
  
  <!-- Private EC2 to RDS -->
  <line x1="270" y1="340" x2="200" y2="420" stroke="#F44336" stroke-width="2"/>
  
  <!-- Private EC2 to S3 via VPC Endpoint -->
  <path d="M 300 325 Q 600 280 870 315" fill="none" stroke="#FF9900" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- VPC Endpoint to S3 -->
  <line x1="885" y1="330" x2="980" y2="330" stroke="#FF9900" stroke-width="2"/>
  
  <!-- RDS Replication -->
  <line x1="240" y1="440" x2="460" y2="440" stroke="#FF5722" stroke-width="2" stroke-dasharray="3,3"/>
  
  <!-- IAM Role to EC2 -->
  <path d="M 360 520 Q 320 400 270 340" fill="none" stroke="#4CAF50" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- Route Tables indication -->
  <rect x="500" y="640" width="200" height="80" fill="#F5F5F5" stroke="#757575" stroke-width="1" rx="5"/>
  <text x="510" y="660" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#424242">Route Tables</text>
  <text x="510" y="675" font-family="Arial, sans-serif" font-size="9" fill="#666">• Public RT → IGW</text>
  <text x="510" y="687" font-family="Arial, sans-serif" font-size="9" fill="#666">• Private RT → NAT Gateway</text>
  <text x="510" y="699" font-family="Arial, sans-serif" font-size="9" fill="#666">• DB RT → Local only</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="750" y="520" width="180" height="120" fill="#FAFAFA" stroke="#BDBDBD" stroke-width="1" rx="5"/>
  <text x="760" y="540" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#424242">Legend</text>
  
  <rect x="760" y="550" width="15" height="10" fill="#E3F2FD" stroke="#2196F3" stroke-width="1"/>
  <text x="780" y="558" font-family="Arial, sans-serif" font-size="9" fill="#666">Public Subnet</text>
  
  <rect x="760" y="565" width="15" height="10" fill="#F3E5F5" stroke="#9C27B0" stroke-width="1"/>
  <text x="780" y="573" font-family="Arial, sans-serif" font-size="9" fill="#666">Private Subnet</text>
  
  <rect x="760" y="580" width="15" height="10" fill="#FFEBEE" stroke="#F44336" stroke-width="1"/>
  <text x="780" y="588" font-family="Arial, sans-serif" font-size="9" fill="#666">DB Subnet</text>
  
  <line x1="760" y1="600" x2="775" y2="600" stroke="#666" stroke-width="2"/>
  <text x="780" y="603" font-family="Arial, sans-serif" font-size="9" fill="#666">Connection</text>
  
  <line x1="760" y1="615" x2="775" y2="615" stroke="#666" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="780" y="618" font-family="Arial, sans-serif" font-size="9" fill="#666">Secure Connection</text>
</svg>